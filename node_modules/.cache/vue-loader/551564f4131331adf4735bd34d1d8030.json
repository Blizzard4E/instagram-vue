{"remainingRequest":"/home/starscream97/Documents/Instagram/insta/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/starscream97/Documents/Instagram/insta/src/views/Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/starscream97/Documents/Instagram/insta/src/views/Create.vue","mtime":1553154646882},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst axios = require(\"axios\");\n\nexport default {\n  data() {\n    return {\n      image: null,\n      title: \"\",\n      progress: \"\"\n    };\n  },\n  \n  methods: {\n    onFileChanged(event) {\n      //   console.log(event.target.files[0])\n      this.image = event.target.files[0];\n    },\n    async createPost() {\n      const userId = JSON.parse(localStorage.getItem(\"user\")).userId;\n      let formData = new FormData();\n      formData.append(\"title\", this.title);\n      formData.append(\"description\", this.description);\n      formData.append(\"user\", userId);\n      formData.append(\"pictureURL\", this.image);\n      const post=await axios({\n        method: \"post\",\n        url: `${process.env.VUE_APP_ROOT_API}/api/post`,\n        data: formData,\n        config: { headers: { \"Content-Type\": \"multipart/form-data\" } }\n      });\n      this.$socket.emit('newPost',post.data.data);\n      this.$router.replace('/');\n    }\n  }\n};\n",{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Create.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"create-post-form\">\n  <div class=\"container createPost\">\n      <form\n        action=\"/create\"\n        method=\"post\"\n        enctype=\"multipart/form-data\"\n        @submit.prevent=\"createPost()\"\n      >\n        <div class=\"field\">\n          <label>Title</label>\n          <input name=\"title\" v-model=\"title\" type=\"text\" placeholder=\"Title\">\n        </div>\n        <div class=\"field\">\n          <label>Image</label>\n          <input name=\"image\" type=\"file\" @change=\"onFileChanged\">\n        </div>\n        <h5>{{progress}}</h5>\n        <button type=\"submit\">Post</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nconst axios = require(\"axios\");\n\nexport default {\n  data() {\n    return {\n      image: null,\n      title: \"\",\n      progress: \"\"\n    };\n  },\n  \n  methods: {\n    onFileChanged(event) {\n      //   console.log(event.target.files[0])\n      this.image = event.target.files[0];\n    },\n    async createPost() {\n      const userId = JSON.parse(localStorage.getItem(\"user\")).userId;\n      let formData = new FormData();\n      formData.append(\"title\", this.title);\n      formData.append(\"description\", this.description);\n      formData.append(\"user\", userId);\n      formData.append(\"pictureURL\", this.image);\n      const post=await axios({\n        method: \"post\",\n        url: `${process.env.VUE_APP_ROOT_API}/api/post`,\n        data: formData,\n        config: { headers: { \"Content-Type\": \"multipart/form-data\" } }\n      });\n      this.$socket.emit('newPost',post.data.data);\n      this.$router.replace('/');\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>\n\n"]}]}