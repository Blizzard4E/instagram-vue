{"remainingRequest":"/home/starscream97/Documents/Instagram/insta/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/starscream97/Documents/Instagram/insta/src/views/Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css&","dependencies":[{"path":"/home/starscream97/Documents/Instagram/insta/src/views/Home.vue","mtime":1553087479538},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/starscream97/Documents/Instagram/insta/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nh5{\n  font-weight: 600;\n  font-size: 1rem;\n}\nh6{\n  font-weight: 300;\n}\n\n\n\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home container\">\n    <div class=\"posts\">\n      <div class=\"post\" v-for=\"(post,index) in posts\" :key=\"post._id\">\n        <div class=\"post-author\">\n          <h5>{{post.user.name}}</h5>\n          <h6>{{post.user.username}}</h6>\n        </div>\n        <div class=\"post-description\">\n          <img :src=\"root_url + '/' + post.pictureURL\" alt=\"\" @click=\"viewPost(post._id)\">\n          <h5>{{post.title}}</h5>\n          <h6>Likes: {{post.likes}}</h6>\n        </div>\n        <div class=\"react-buttons\">\n          <div class=\"like\"><i class=\"fas fa-heart\" @click.prevent=\"likePost(post._id)\"></i></div>\n        </div>\n        <div class=\"comments\">\n          <div v-for=\"comment in post.comments\" :key=\"comment._id\">\n            <h6>{{comment.commenterName}}</h6>\n            <h5>{{comment.comment}}</h5>\n          </div>\n        </div>\n        <div class=\"comment\">\n          <form action=\"\" @submit.prevent=\"commentOnPost(index,post._id,post.user._id,post.pictureURL)\">\n            <input type=\"text\" placeholder=\"Add a comment\" v-model=\"newcomment\">\n          </form>\n        </div>\n      </div>\n    </div>\n    <div class=\"sidebar\">\n      <Sidebar />\n    </div>\n    \n  </div>\n</template>\n\n<script>\n\nimport axios from 'axios'\nimport Sidebar from '@/components/Sidebar'\nimport Vue from 'vue'\n\nexport default {\n  name: \"home\",\n  components:{\n    Sidebar\n  },\n  data(){\n    return{\n      perPage:10,\n      page:1,\n      posts:[],\n      root_url:process.env.VUE_APP_ROOT_API,\n      newcomment:'',\n      user:JSON.parse(localStorage.getItem('user'))\n    }\n  },\n sockets:{\n   users(data){\n     console.log(data)\n   },\n   notificationReceived(data){\n    //  console.log(data);\n   }\n },\n  methods:{\n    fetchAllPosts(){\n      axios.get(`${process.env.VUE_APP_ROOT_API}/api/post?perPage=${this.perPage}&page=${this.page}`).then(res=>{\n        this.posts=res.data.data\n      })\n    },\n    viewPost(postId){\n      this.$router.push({name:'singlePost',params:{postId}});\n    },\n  \n    likePost(postId){\n      // const userId=JSON.parse(localStorage.getItem('user')).userId;\n      axios.post(`${process.env.VUE_APP_ROOT_API}/api/post/like`,{\n        userId:this.userId,\n        postId\n      })\n    },\n    commentOnPost(postIndex,postId,receiverId,pictureURL){\n      // this.posts[postIndex].comments.push(this.comment);\n      axios.post(`${process.env.VUE_APP_ROOT_API}/api/comment/comment`,{\n        userId:this.user.userId,\n        comment:this.newcomment,\n        commenterName:this.user.name,\n        postId\n      }).then(res=>{\n        this.newcomment=''\n      })\n      this.$socket.emit('notification',{postId,comment:this.newcomment,notificationType:\"Comment\",to:receiverId,pictureURL,userId:this.$store.state.user.userId,username:this.$store.state.user.name});      \n    },\n  },\n  created(){\n    this.fetchAllPosts();\n    const user=JSON.parse(localStorage.getItem('user'));\n    if(user && user.userId!==''){\n        this.$store.commit('setUser',user);\n        this.$socket.emit('newUser',{userId:user.userId,},function(data){\n        });\n    }\n  },\n  watch: {\n    posts:{\n      handler:'fetchAllPosts'\n    }\n}\n};\n</script>\n\n<style scoped>\nh5{\n  font-weight: 600;\n  font-size: 1rem;\n}\nh6{\n  font-weight: 300;\n}\n\n\n\n</style>\n\n"]}]}